# Dockerfile.manager - Para ejecutar múltiples servicios sin PostgreSQL local
FROM docker/compose:alpine-1.29.2

# Instalar herramientas necesarias
RUN apk add --no-cache \
    docker-cli \
    curl \
    bash \
    nginx \
    wget \
    gettext \
    shadow

# Crear directorios necesarios
RUN mkdir -p /app /etc/nginx/conf.d /var/log/nginx /var/run /tmp

# Copiar archivos de configuración
COPY docker-compose.yml /app/
COPY nginx.conf /etc/nginx/conf.d/default.conf
COPY start.sh /app/

# Hacer el script ejecutable
RUN chmod +x /app/start.sh

WORKDIR /app

# Exponer el puerto principal
EXPOSE 10000

# Comando de inicio
CMD ["/app/start.sh"]
