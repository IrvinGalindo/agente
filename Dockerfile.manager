# Dockerfile.manager - Para ejecutar múltiples servicios
FROM docker/compose:latest

# Instalar Docker CLI y otras herramientas necesarias
RUN apk add --no-cache docker-cli curl bash nginx

# Crear directorios necesarios
RUN mkdir -p /app /etc/nginx/conf.d /var/log/nginx /var/run

# Copiar archivos de configuración
COPY docker-compose.yml /app/
COPY nginx.conf /etc/nginx/conf.d/default.conf
COPY start.sh /app/

# Hacer el script ejecutable
RUN chmod +x /app/start.sh

WORKDIR /app

# Exponer el puerto principal
EXPOSE 10000

# Comando de inicio
CMD ["/app/start.sh"]
